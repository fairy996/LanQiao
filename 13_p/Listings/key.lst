C51 COMPILER V9.60.7.0   KEY                                                               03/27/2024 06:31:23 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE KEY
OBJECT MODULE PLACED IN .\Objects\key.obj
COMPILER INVOKED BY: D:\Program Files\ARM\Core\C51\BIN\C51.EXE key.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.
                    -\Listings\key.lst) TABS(2) OBJECT(.\Objects\key.obj)

line level    source

   1          #include "key.h"
   2          
   3          sbit L1 = P4 ^ 4;
   4          sbit L2 = P4 ^ 2;
   5          sbit L3 = P3 ^ 5;
   6          sbit L4 = P3 ^ 4;
   7          sbit H1 = P3 ^ 0;
   8          sbit H2 = P3 ^ 1;
   9          sbit H3 = P3 ^ 2;
  10          sbit H4 = P3 ^ 3;
  11          
  12          unsigned char key_up = 1;
  13          unsigned char Key_Scan1(void)
  14          {
  15   1          if ((key_up == 1) && (H1 == 0 || H2 == 0 || H3 == 0 || H4 == 0))
  16   1          {
  17   2              Delay_ms(20);
  18   2              key_up = 0;
  19   2              if (H1 == 0)
  20   2                  return 1;
  21   2              else if (H2 == 0)
  22   2                  return 2;
  23   2              else if (H3 == 0)
  24   2                  return 3;
  25   2              else if (H4 == 0)
  26   2                  return 4;
  27   2              else
  28   2                  return 0;
  29   2          }
  30   1          else if (H1 == 1 && H2 == 1 && H3 == 1 && H4 == 1)
  31   1          {
  32   2              key_up = 1;
  33   2              return 0;
  34   2          }
  35   1          return 0;
  36   1      }
  37          
  38          unsigned char Key_Scan2(void)
  39          {
  40   1          unsigned char keynum = 0;
  41   1          L1 = L2 = L3 = L4 = 1;
  42   1          H1 = H2 = H3 = H4 = 0;
  43   1          if (key_up == 1 && (L1 == 0 || L2 == 0 || L3 == 0 || L4 == 0))
  44   1          {
  45   2              Delay_ms(20);
  46   2              if (L1 == 0)
  47   2                  keynum = 1;
  48   2              else if (L2 == 0)
  49   2                  keynum = 2;
  50   2              else if (L3 == 0)
  51   2                  keynum = 3;
  52   2              else if (L4 == 0)
  53   2                  keynum = 4;
  54   2              else
C51 COMPILER V9.60.7.0   KEY                                                               03/27/2024 06:31:23 PAGE 2   

  55   2                  return 0;
  56   2              key_up = 0;
  57   2              L1 = L2 = L3 = L4 = 0;
  58   2              H1 = H2 = H3 = H4 = 1;
  59   2              if (H1 == 0)
  60   2                  return keynum;
  61   2              else if (H2 == 0)
  62   2                  return keynum + 4;
  63   2              else if (H3 == 0)
  64   2                  return keynum + 8;
  65   2              else if (H4 == 0)
  66   2                  return keynum + 12;
  67   2          }
  68   1          else if (L1 == 1 && L2 == 1 && L3 == 1 && L4 == 1)
  69   1          {
  70   2              key_up = 1;
  71   2              return 0;
  72   2          }
  73   1          return 0;
  74   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    228    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
